<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Triva Game</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>
<body>
    <!-- HTML -->
  <div class="container text-center">
      <!-- Header -->
    <header id="header">
      <h1>Totally Trivia</h1>
    </header>
    
    <div class="row">
      <div class="col-lg-12">
        <!-- div to display time remaining -->
        <div id="timer">
        </div>       
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <div id="question">QUESTION GOES HERE
        </div> <!-- div for question -->           
      </div>
    </div>

    <!-- <div class="row"> -->
      <!-- <div class="start-box text-center"> -->
      <button id="start-btn"><h2>Start</h2></button>
      <!-- </div> -->
    <!-- </div> -->

    <div id="answer-block">
      <div class="row">
        <div class="col-lg-12">
        <!-- div for question -->
          <h3 id="choice1">Answer1</h3>
          <h3 id="choice2">Answer2</h3>
          <h3 id="choice3">Answer3</h3>
          <h3 id="choice4">Answer4</h3>
          <p id="yourPick"></p>
        </div>
      </div>
    </div>
  </div>
  <!-- end HTML block -->
  <!-- *** begin Javascript *** -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type = "text/javascript">
// begin program with variable declarations
var timeLimit = 11;
var intervalId;
var started = false;
var setDelayRestart;
var trivia = [
    {question: "Who was the lead singer of Led Zeppelin?",
    answers: ["Robert Plant", "Jimmy Page", "Roger Daltry", "Eric Clapton"],
    rightAnswer: "Robert Plant"},

    {question: "Who released the album 'Dark side of the Moon?'",
    answers: ["The Yardbirds", "The Rolling Stones", "Pink Floyd", "Black Sabbath"],
    rightAnswer: "Pink Floyd"},
    
    {question: 'What song includes the line "teenage wasteland?"', 
    answers: ["They're all wasted", "Smells like teen spirit", 
                "Wasted days and wasted nights","Baba O'Riley"],
    rightAnswer: "Baba O'Riley"},
  
    {question: "Which person is NOT a memeber of Pearl Jam?",
     answers:  ["Chris Cornell","Eddie Vedder","Mike McCready","Stone Gossard"], 
     rightAnswer: "Chris Cornell"}, 
    
    {question:  "Which of these was NOT a Beatles song?",
     answers:   ["Ticket to Ride","Hello Goodbye","Sargent Peppers","Lady Madonna"],
     rightAnswer:"Sargent Peppers"},
    
    {question:  "Which album has more copies sold?",
     answers:   ['"Their Greatest Hits" by the Eagles','"Thriller" by Michael Jackson', 
                 '"Zeppelin IV" by Led Zeppelin','"The Wall" by Pink Floyd'],
    rightAnswer:'"Their Greatest Hits" by the Eagles'},
  
    {question:  "Who was NOT a member of the Jackson 5?",
     answers:   ["Michael Jackson","Jackie Jackson","Jauan Jackson", "Tito Jackson"],
    rightAnswer:"Jauan Jackson"},
  ];

var imagePick = []; // not sure if I'm using this
var correctGuess = 0;
var incorrectGuess = 0;
var noGuess = 0;
var win = false;
questionCount = 0;


// $(document).ready(function(){
// ***** Begin program **********************************
// start with hiding all fields except h1 and start button
//   on click, hide start button & display features of game  

$("#start-btn").click(function(){
  $("#start-btn").hide();
  $("#timer").css("visibility", "visible");
  $("#question").css("visibility","visible");
  $("#answer-block").css("visibility","visible");
 console.log ("before if timeLimit");
 if (timeLimit == 0) {
   questionCount++;
   displayPage();
 }
 displayPage();

function displayPage(){
console.log("question count var = "+questionCount);
  // set up the first question and choices //  
  document.getElementById("question").innerHTML = trivia[questionCount].question;
  document.getElementById("choice1").innerHTML = trivia[questionCount].answers[0];
  document.getElementById("choice2").innerHTML = trivia[questionCount].answers[1];
  document.getElementById("choice3").innerHTML = trivia[questionCount].answers[2];
  document.getElementById("choice4").innerHTML = trivia[questionCount].answers[3];
}
// console.log ("variable i = "+i);
// console.log(trivia[i].answers);
  // }  //end setupBoard function 
  // check for each button clicked and compare with right answer

  $("#choice1").on("click", function() {
    var temp = ($("h3").data("pick-data", trivia[questionCount].answers[0])); //temp holds choice displayed
    var pickValue = ($(this).data("pick-data"));  // pickValue is the data value of choice
    
    if (pickValue == trivia[questionCount].rightAnswer) { // check if pickValue = "right answer"      
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");
      $("#timer").append("<h2>"+"You got it. Nice job!"+"<h2>");     
      correctGuess++;
      win == true;
      stop(); // go to stop function
      if (questionCount < trivia.length) {
        displayPage();
      }
    }
    else {
      incorrectGuess++;
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");
      $("#timer").append("<h4>"+"Nope, the correct answer is "+trivia[questionCount].rightAnswer+"<h4>");    
      stop();
      if (questionCount < trivia.length) {
        displayPage();
      }
    } 
    console.log("pickValue = "+pickValue); // this var returns corretly
  });

  $("#choice2").click(function(){
    var temp = ($("h3").data("pick-data", trivia[questionCount].answers[1]));  // var temp holds the choice displayed
    var pickValue = ($(this).data("pick-data"));   // pickValue is the data value of choice
    
    if (pickValue == trivia[questionCount].rightAnswer) { // check if pickValue = "right answer"
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");
      $("#timer").append("<h2>"+"You got it. Nice job!"+"<h2>");   
      correctGuess++;
      win == true;
      stop();  // go to stop function
      if (questionCount < trivia.length) {
        displayPage();
      }
    }
    else {
      incorrectGuess++;
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");    
      $("#timer").append("<h4>"+"Nope, the correct answer is "+trivia[questionCount].rightAnswer+"<h4>");
      stop();
      if (questionCount < trivia.length) {
        displayPage();
      }
    }

    console.log("pickValue = "+pickValue); // this var returns correctly
  });

  $("#choice3").click(function(){
    var temp = ($("h3").data("pick-data", trivia[questionCount].answers[2])); // var temp holds the choice displayed
    var pickValue = ($(this).data("pick-data")); // pickValue is the data value of choice
    
    if (pickValue == trivia[questionCount].rightAnswer) {
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>"); 
      $("#timer").append("<h2>"+"You got it. Nice job!"+"<h2>"); 
      correctGuess++;
      win == true;
      stop();  // go to stop funtion
      if (questionCount < trivia.length) {
        displayPage();
      }
    }
    else {
      incorrectGuess++;   
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");
      $("#timer").append("<h4>"+"Nope, the correct answer is "+trivia[questionCount].rightAnswer+"<h4>");    
      stop();
      if (questionCount < trivia.length) {
        displayPage();
      }
    } 
  });

  $("#choice4").click(function(){
    var temp = ($("h3").data("pick-data", trivia[questionCount].answers[3]));
    var pickValue = ($(this).data("pick-data"));
    if (pickValue == trivia[questionCount].rightAnswer) {
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>"); 
      $("#timer").append("<h2>"+"You got it. Nice job!"+"<h2>");      
      correctGuess++;
      win == true;
      stop();  // go to stop function
      if (questionCount < trivia.length) {
        displayPage();
      }   
    }
    else {
      incorrectGuess++;
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");    
      $("#timer").append("<h4>"+"Nope, the correct answer is "+trivia[questionCount].rightAnswer+"<h4>");
      stop();
      if (questionCount < trivia.length) {
        displayPage();
      }
    }

    console.log("pickValue = "+pickValue); // this var returns 
  });


  // If no click occurs (ie. Timer runs out)


started = true; 
// if (timeLimit==0) {       
//     $("#timer").html("<h2>"+"Time remaining: 0 Seconds"+"<h2>");    
//     $("#timer").append("<h4>"+"Time's up. Try a guess next time. Let's try another."+"<h4>");
//     noGuess ++;
//     stop();
//     displayPage();
//   }

triviaGame();

  // end onClick event // end of Program ?? 

// ****** BEGIN FUNCTIONS BELOW ******

function triviaGame(){
  if (started==true) {
      clearInterval(intervalId);
      intervalId = setInterval(decrement, 1000);
      console.log("INSIDE THE triviaGame function"); 
  } // end if Loop
} // end function triviaGame

function decrement() {
  // console.log("INSIDE THE decrement function")
  timeLimit --;
  $("#timer").html("<h2>"+"Time remaining: " + timeLimit + " Seconds"+"<h2>");
     
    if (timeLimit==0) {
      console.log("timeLimit = 0");
      stop();
      console.log("removed displayPage call in decrement function");
      $("#timer").html("<h2>"+"Time remaining: 0 Seconds"+"<h2>");    
      $("#timer").append("<h4>"+"Time's up. The answer is "+trivia[(questionCount-1)].rightAnswer+"<h4>");
      noGuess ++;
      displayPage();
    }       

}  // end function decrement

function stop() {
  console.log("INSIDE THE stop function")
//  Clears intervalId
//  pass the name of the interval to the clearInterval function.
  timeLimit = 11;
  questionCount ++;
  clearInterval(intervalId); 
  setDelayRestart = setTimeout(triviaGame, 2500);   
} // end function stop

});
</script>  
</body>
</html>