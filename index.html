<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>First Draft Triva Game</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>
<body>
    <!-- HTML -->
  <div class="container text-center">
      <!-- Header -->
    <header id="header">
      <h1>Totally Trivia</h1>
    </header>
    
    <div class="row">
      <div class="col-lg-12">
        <!-- div to display time remaining -->
        <div id="timer">
        </div>       
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <div id="question">QUESTION GOES HERE
        </div> <!-- div for question -->           
      </div>
    </div>

    <!-- <div class="row"> -->
      <!-- <div class="start-box text-center"> -->
      <button id="start-btn"><h2>Start</h2></button>
      <!-- </div> -->
    <!-- </div> -->

    <div id="answer-block">
      <div class="row">
        <div class="col-lg-12">
        <!-- div for question -->
          <h3 id="choice1">Answer1</h3>
          <h3 id="choice2">Answer2</h3>
          <h3 id="choice3">Answer3</h3>
          <h3 id="choice4">Answer4</h3>
          <p id="yourPick"></p>
        </div>
      </div>
    </div>
  </div>
  <!-- end HTML block -->
  <!-- *** begin Javascript *** -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type = "text/javascript">
// begin program with variable declarations
var timeLimit = 11;
var intervalId;
var started = false;
var setDelayRestart;
var trivia = [
    {question: "Who was the lead singer of Led Zeppelin?",
    answers: ["Robert Plant", "Jimmy Page", "Roger Daltry", "Eric Clapton"],
    rightAnswer: "Robert Plant"},

    {question: "Who released the album 'Dark side of the Moon?'",
    answers: ["The Yardbirds", "The Rolling Stones", "Pink Floyd", "Black Sabbath"],
    rightAnswer: "Pink Floyd"}];

var imagePick = []; // not sure if I'm using this
var correctGuess = 0;
var incorrectGuess = 0;
var noGuess = 0;
var win = false;


// $(document).ready(function(){
// ***** Begin program **********************************
// start with hiding all fields except h1 and start button
//   on click, hide start button & display features of game  

$("#start-btn").click(function(){
  $("#start-btn").hide();
  $("#timer").css("visibility", "visible");
  $("#question").css("visibility","visible");
  $("#answer-block").css("visibility","visible");

  // set up the first question and choices //  
  document.getElementById("question").innerHTML = trivia[0].question;
  document.getElementById("choice1").innerHTML = trivia[0].answers[0];
  document.getElementById("choice2").innerHTML = trivia[0].answers[1];
  document.getElementById("choice3").innerHTML = trivia[0].answers[2];
  document.getElementById("choice4").innerHTML = trivia[0].answers[3];

  // check for each button clicked and compare with right answer
  $("#choice1").on("click", function() { 
    var temp = ($("h3").data("pick-data", trivia[0].answers[0])); //temp holds choice displayed
    var pickValue = ($(this).data("pick-data"));  // pickValue is the data value of choice
    
    if (pickValue == trivia[0].rightAnswer) { // check if pickValue = "right answer"      
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");
      $("#timer").append("<h2>"+"You got it. Nice job!"+"<h2>");     
      correctGuess++;
      win == true;
      stop(); // go to stop function
    }
    else {
      incorrectGuess++;
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");
      $("#timer").append("<h4>"+"Sorry, that is incorrect"+"<h4>"); 
      stop();
    } 
    console.log("pickValue = "+pickValue); // this var returns corretly
  });

  $("#choice2").click(function(){
    var temp = ($("h3").data("pick-data", trivia[0].answers[1]));  // var temp holds the choice displayed
    var pickValue = ($(this).data("pick-data"));   // pickValue is the data value of choice
    
    if (pickValue == trivia[0].rightAnswer) { // check if pickValue = "right answer"
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");
      $("#timer").append("<h4>"+"You got it. Nice job!"+"<h4>");   
      correctGuess++;
      win == true;
      stop();  // go to stop function
    }
    else {
      incorrectGuess++;
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");    
      $("#timer").append("<h4>"+"Sorry, that is incorrect"+"<h4>");
      stop();
    }
    console.log("pickValue = "+pickValue); // this var returns correctly
  });

  $("#choice3").click(function(){
    var temp = ($("h3").data("pick-data", trivia[0].answers[2])); // var temp holds the choice displayed
    var pickValue = ($(this).data("pick-data")); // pickValue is the data value of choice
    
    if (pickValue == trivia[0].rightAnswer) {
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>"); 
      $("#timer").append("<h4>"+"You got it. Nice job!"+"<h4>"); 
      correctGuess++;
      win == true;
      stop();  // go to stop funtion
    }
    else {
      incorrectGuess++;   
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");
      $("#timer").append("<h4>"+"Sorry, that is incorrect"+"<h4>");    
      stop();
    } 
    console.log("pickValue = "+pickValue); // this var returns Roger Daltry 
  });

  $("#choice4").click(function(){
    var temp = ($("h3").data("pick-data", trivia[0].answers[3]));
    var pickValue = ($(this).data("pick-data"));
    if (temp == trivia[0].rightAnswer) {
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>"); 
      $("#timer").append("<h4>"+"You got it. Nice job!"+"<h4>");      
      correctGuess++;
      win == true;
      stop();  // go to stop function
    
    }
    else {
      incorrectGuess++;
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");    
      $("#timer").append("<h4>"+"Sorry, that is incorrect"+"<h4>");
      stop();
    }
    // console.log("pickValue = "+pickValue); // this var returns 
  });
  


started = true; 
triviaGame();

});  // end onClick event // end of Program ?? 

// ****** BEGIN FUNCTIONS BELOW ******
function resetGame(){
}

function triviaGame(){
  if (started==true) {
      clearInterval(intervalId);
      intervalId = setInterval(decrement, 1000);
      console.log("does this print while clock is ticking?"); 
  } // end if Loop
} // end function triviaGame

function decrement() {
  timeLimit --;
  $("#timer").html("<h2>"+"Time remaining: " + timeLimit + " Seconds"+"<h2>");

    if (timeLimit==0) {       
      // alert("Timer has stopped.");
      $("#timer").html("<h2>"+"Time remaining: 0 Seconds"+"<h2>");    
      $("#timer").append("<h4>"+"Time's up. Try a guess next time. Let's try another."+"<h4>");
      console.log("just before stop function");
      stop();
    //   triviaGame();
    }
}  // end function decrement

function stop() {
//  Clears intervalId
//  pass the name of the interval to the clearInterval function.
  timeLimit = 11;
  clearInterval(intervalId);


  setDelayRestart = setTimeout(triviaGame, 3000);
//   setDelayRestart = setTimeout(function() {       
} // end function stop


//   $("#show").click(function(){
//     $("p").show();
//   });


</script>  
</body>
</html>