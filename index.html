<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Triva Game</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>
<body>
    <!-- HTML -->
  <div class="container text-center">
      <!-- Header -->
    <header id="header">
      <h1>Totally Trivia</h1>
    </header>
    
    <div class="row">
      <div class="col-lg-12">
        <!-- div with full page layout (col-12) to display time remaining -->
        <div id="timer">
        </div>       
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <div id="question">QUESTION GOES HERE
        </div> <!-- div with full page layout (col-12) to display question -->           
      </div>
    </div>

    <!-- <div class="row"> -->
      <!-- <div class="start-box text-center"> -->
      <button id="start-btn"><h2>Start</h2></button>
      <!-- </div> -->
    <!-- </div> -->
    <div id="final-stats">
      <div id="answer-block">
        <div class="row">
          <div class="col-lg-12">
            <!-- div for question -->
            <h3 id="choice1">Answer1</h3>
            <h3 id="choice2">Answer2</h3>
            <h3 id="choice3">Answer3</h3>
            <h3 id="choice4">Answer4</h3>
            <p id="yourPick"></p>
          </div>
        </div>
      </div>
    </div>  <!-- close "final-stats" div -->
  </div>  <!-- close "container" div -->
  <!-- end HTML block -->
  <!-- *** begin Javascript *** -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type = "text/javascript">
// begin program with variable declarations
var timeLimit = 11;
var intervalId;
var started = false;
var setDelayRestart;
var trivia = [
    {question: "Who was the lead singer of Led Zeppelin?",
    answers: ["Robert Plant", "Jimmy Page", "Roger Daltry", "Eric Clapton"],
    rightAnswer: "Robert Plant"},

    {question: "Who released the album 'Dark side of the Moon?'",
    answers: ["The Yardbirds", "The Rolling Stones", "Pink Floyd", "Black Sabbath"],
    rightAnswer: "Pink Floyd"},
    
    {question: 'What song includes the line "teenage wasteland?"', 
    answers: ["They're all wasted", "Smells like teen spirit", 
                "Wasted days and wasted nights","Baba O'Riley"],
    rightAnswer: "Baba O'Riley"},
  
    {question: "Which person is NOT a memeber of Pearl Jam?",
     answers:  ["Chris Cornell","Eddie Vedder","Mike McCready","Stone Gossard"], 
     rightAnswer: "Chris Cornell"}, 
    
    {question:  "Which of these was NOT a Beatles song?",
     answers:   ["Ticket to Ride","Hello Goodbye","Sargent Peppers","Lady Madonna"],
     rightAnswer:"Sargent Peppers"},
    
    {question:  "Which album has more copies sold?",
     answers:   ['"Their Greatest Hits" by the Eagles','"Thriller" by Michael Jackson', 
                 '"Zeppelin IV" by Led Zeppelin','"The Wall" by Pink Floyd'],
    rightAnswer:'"Their Greatest Hits" by the Eagles'},
  
    {question:  "Who was NOT a member of the Jackson 5?",
     answers:   ["Michael Jackson","Jackie Jackson","Jauan Jackson", "Tito Jackson"],
    rightAnswer:"Jauan Jackson"},
  ];

var imagePick = []; // not sure if I'm using this
var correctGuess = 0;
var incorrectGuess = 0;
var noGuess = 0;
var win = false;
var started = true; 
questionCount = 0;
// var videoBox;


// $(document).ready(function(){
// ***** Begin program **********************************
// start with hiding all fields except h1 and start button
//   on click, hide start button & display features of game  

$("#start-btn").click(function(){
  $("#start-btn").hide();
  $("#timer").css("visibility", "visible");
  $("#question").css("visibility","visible");
  $("#answer-block").css("visibility","visible");

//  if (timeLimit == 0) {
//    questionCount++;
//    displayPage(); 
//  }
   displayPage();
 

function displayPage(){
  // set up the first question and choices //  
  document.getElementById("question").innerHTML = trivia[questionCount].question;
  document.getElementById("choice1").innerHTML = trivia[questionCount].answers[0];
  document.getElementById("choice2").innerHTML = trivia[questionCount].answers[1];
  document.getElementById("choice3").innerHTML = trivia[questionCount].answers[2];
  document.getElementById("choice4").innerHTML = trivia[questionCount].answers[3];
}

function showVideo() {
// $("#answer-block").css("visibility","hidden");
// alert("In the showVideo function");
}

  $("#choice1").on("click", function() {
    var temp = ($("h3").data("pick-data", trivia[questionCount].answers[0])); //temp holds choice displayed
    var pickValue = ($(this).data("pick-data"));  // pickValue is the data value of choice   
    
    if (pickValue === trivia[questionCount].rightAnswer) { // check if pickValue = "right answer"      
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");
      $("#timer").append("<h2>"+"You got it. Nice job!"+"<h2>");     
      correctGuess++;
      win == true;
      stop(); // go to stop function
      if (questionCount < trivia.length) {  
        displayPage();
      }
    }
    else {
      incorrectGuess++;
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");
      $("#timer").append("<h4>"+"Nope, the correct answer is "+trivia[questionCount].rightAnswer+"<h4>");    
      stop();
      if (questionCount < trivia.length) {
        displayPage();
      }
    } 
  });

  $("#choice2").click(function(){
    var temp = ($("h3").data("pick-data", trivia[questionCount].answers[1]));  // var temp holds the choice displayed
    var pickValue = ($(this).data("pick-data"));   // pickValue is the data value of choice
    
    if (pickValue == trivia[questionCount].rightAnswer) { // check if pickValue = "right answer"
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");
      $("#timer").append("<h2>"+"You got it. Nice job!"+"<h2>");   
      correctGuess++;
      win == true;
      stop();  // go to stop function
      if (questionCount < trivia.length) {
        displayPage();
      }
    }
    else {
      incorrectGuess++;
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");    
      $("#timer").append("<h4>"+"Nope, the correct answer is "+trivia[questionCount].rightAnswer+"<h4>");
          
      // $("#video-block").css("visibility","hidden");
      // alert("In the showVideo function");
      // videoBox = $("<video>");
      // videoBox.addClass("#video-block");
      // videoBox.attr("src", "https://youtu.be/oxHoLtrGNCA" );
      // $("video-block").append(videoBox);

      // video src = "https://youtu.be/oxHoLtrGNCA" width="250", height="250" 
      
    // var video= document.getElementById("vid");
    // video.type="video/.mp4";
    // video.src="+vid_url+";
    // video.controls=true;
    // video.autoplay=false;

      stop();
      if (questionCount < trivia.length) {
        displayPage();
      }
    }
  });

  $("#choice3").click(function(){
    var temp = ($("h3").data("pick-data", trivia[questionCount].answers[2])); // var temp holds the choice displayed
    var pickValue = ($(this).data("pick-data")); // pickValue is the data value of choice
    
    if (pickValue == trivia[questionCount].rightAnswer) {
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>"); 
      $("#timer").append("<h2>"+"You got it. Nice job!"+"<h2>"); 
      correctGuess++;
      win == true;
      stop();  // go to stop funtion
      if (questionCount < trivia.length) {
        displayPage();
      }
    }
    else {
      incorrectGuess++;   
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");
      $("#timer").append("<h4>"+"Nope, the correct answer is "+trivia[questionCount].rightAnswer+"<h4>");    
      stop();
      if (questionCount < trivia.length) {
        displayPage();
      }
    } 
  });

  $("#choice4").click(function(){
    var temp = ($("h3").data("pick-data", trivia[questionCount].answers[3]));
    var pickValue = ($(this).data("pick-data"));
    if (pickValue == trivia[questionCount].rightAnswer) {
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>"); 
      $("#timer").append("<h2>"+"You got it. Nice job!"+"<h2>");      
      correctGuess++;
      win == true;
      stop();  // go to stop function
      if (questionCount < trivia.length) {
        displayPage();
      }   
    }
    else {
      incorrectGuess++;
      $("#timer").html("<h2>"+"Time remaining: "+timeLimit+" Seconds"+"<h2>");    
      $("#timer").append("<h4>"+"Nope, the correct answer is "+trivia[questionCount].rightAnswer+"<h4>");
      stop();
      if (questionCount < trivia.length) {
        displayPage();
      }
    }
  });

  // Begin program // with triviaGame function 
  // start timers, then wait for clicks
triviaGame();

  // end onClick event // end of Program ?? 

// ****** BEGIN FUNCTIONS BELOW ******

function triviaGame(){
  if (started==true) {
      clearInterval(intervalId);
      intervalId = setInterval(decrement, 1000);
      console.log("INSIDE THE triviaGame function"); 
  } // end if Loop
} // end function triviaGame

function decrement() {
  // console.log("INSIDE THE decrement function")
  timeLimit --;
  $("#timer").html("<h2>"+"Time remaining: " + timeLimit + " Seconds"+"<h2>");
     
    if (timeLimit==0) {
      console.log("timeLimit = 0");
       noGuess ++;
      stop();
      $("#timer").html("<h2>"+"Time remaining: 0 Seconds"+"<h2>");    
      $("#timer").append("<h4>"+"Time's up. The answer is "+trivia[(questionCount-1)].rightAnswer+"<h4>");
     
      // console.log("Variable noGuess = "+noGuess);
      if (started === true){
        displayPage();
      }
    }       
}  // end function decrement

function stop() {
  console.log("INSIDE THE stop function")
//  Clears intervalId
//  pass the name of the interval to the clearInterval function.
  timeLimit = 11;
  questionCount ++;
console.log("Question count = "+questionCount);
  if (questionCount === trivia.length) {  // we've reached the end of the questions
      // Change question to "All done ..."
    $("#question").css("color","green");
    $("#question").html("<b>All done, here's how you did!<b>");
      // Re-use choice id's to display final stats; only 3 lines needed  
    $("#choice4").css("visibility","hidden");
    $("#choice1").empty();
    $("#choice2").empty();
    $("#choice3").empty();
      // Display on dom, final stats of trivia game
    $("#choice1").prepend("Correct Answers: "+correctGuess);
    $("#choice2").html("Incorrect Answers: "+incorrectGuess);
    $("#choice3").html("Unanswered: "+noGuess);
    console.log("This is the end of the game/ stats are displayed");
    started = false;
    console.log(started); 
    clearInterval(intervalId);
    // setDelayRestart = setTimeout(triviaGame, 10000);
  } else 
  {
    setDelayRestart = setTimeout(triviaGame, 2000); 
    clearInterval(intervalId);    
     console.log("after setDelayRestart");
  }   
} // end function stop

});
</script> 
 
</body>
</html>